const fileInput=document.getElementById("image-files"),label=document.getElementById("drag-text2");fileInput.addEventListener("change",function(){this.files.length>1?label.textContent=`${this.files.length} files selected`:1===this.files.length?label.textContent=this.files[0].name:label.textContent="Choose files"});const convertButton=document.getElementById("convert-button");function convertImages(){window.scrollTo(0,document.body.scrollHeight);let e=document.getElementById("client-name").value,t=document.getElementById("service-name").value,n=document.getElementById("image-width").value,l=parseInt(document.getElementById("quality").value)/100,i=document.getElementById("image-files").files,o=document.createElement("canvas"),s=o.getContext("2d"),a=new JSZip,d=new FileReader,r=0,u=0,c=0,g=new Date;setStatus("Conversion started"),!function m(){if(c>=i.length){setStatus("Creating zip file"),a.generateAsync({type:"blob"}).then(function(n){saveAs(n,`${e}_${t}.zip`);let l=(new Date-g)/1e3,i=Math.floor(l/60);l%=60;let o=n.size,s=(u-o)/u*100,a="Conversion completed";i>0?(a+=` in ${i} minute${i>1?"s":""}`,l>0&&(a+=` and ${l.toFixed(2)} second${l>1?"s":""}`)):a+=` in ${l.toFixed(2)} seconds`,setStatus(a+=`. Original size was ${formatSize(u)}, final size is ${formatSize(o)}, a reduction of ${s.toFixed(2)}%.`)});return}let f=i[c];setStatus(`Converting file ${c+1}`),d.onload=function(){let g=new Image;g.src=d.result,g.onload=function(){let d=g.width/g.height,f=n/d;o.width=n,o.height=f,s.drawImage(g,0,0,n,f),o.toBlob(function(n){let l=`${e}_${t}-${c+1}.webp`;if(a.file(l,n),0===c)for(let o of i)u+=o.size;r+=n.size,c++,m()},"image/webp",l)}},d.readAsDataURL(f)}()}function buttonshow(){""!=document.getElementById("client-name").value&&""!=document.getElementById("service-name").value&&""!=document.getElementById("image-width").value&&""!=document.getElementById("image-files").value?document.getElementById("convert-button").style.display="block":document.getElementById("convert-button").style.display="none"}convertButton.addEventListener("click",convertImages),document.getElementById("convert-button").style.display="none",setInterval(buttonshow,100);const imageWidthInput=document.getElementById("image-width");imageWidthInput.addEventListener("input",()=>{let e=imageWidthInput.value.replace(/[^0-9]/g,"");imageWidthInput.value=e});const h2Elements=document.querySelectorAll(".subtitle2");function setStatus(e){let t=document.getElementById("status");t.textContent=e}function formatSize(e){let t=e/1048576;if(t<1)return`${(e/1024).toFixed(2)} KB`;{let n=t.toFixed(2);if(t<1024)return`${n} MB`;{let l=t/1024,i=l.toFixed(2);if(l<1024)return`${i} GB`;{let o=(l/1024).toFixed(2);return`${o} TB`}}}}h2Elements.forEach(e=>{let t=e.textContent.trim(),n=t.charAt(t.length-1);if("*"===n){let l=document.createElement("span");l.textContent=n,l.style.color="#FF0000",e.textContent=t.slice(0,t.length-1),e.appendChild(l)}});